\hypertarget{draggable__label_8py_source}{}\doxysection{draggable\+\_\+label.\+py}
\label{draggable__label_8py_source}\index{src/view/draggable\_label.py@{src/view/draggable\_label.py}}
\mbox{\hyperlink{draggable__label_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00001}\mbox{\hyperlink{namespaceview_1_1draggable__label}{00001}} \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00002}00002 \textcolor{stringliteral}{A draggable QLabel.}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00003}00003 \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00005}00005 \textcolor{keyword}{import} enum}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00006}00006 \textcolor{keyword}{from} typing \textcolor{keyword}{import} Optional}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00008}00008 \textcolor{keyword}{from} PyQt6 \textcolor{keyword}{import} QtCore, QtGui, QtWidgets}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00011}00011 \textcolor{keyword}{class }\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label}{DraggableLabel}}(QtWidgets.QLabel):}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00012}00012     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00013}00013 \textcolor{stringliteral}{    A QLabel that }\textcolor{keywordflow}{is} draggable.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00015}00015     Implements mouseMoveEvent \& mousePressEvent.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00016}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label}{00016}}     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00017}00017 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00018}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_ad0d1fcf51065c6d2ad7eece125d153c4}{00018}} \textcolor{stringliteral}{    MIME\_FORMAT = "{}application/drag-\/n-\/drop-\/data"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00019}00019     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00020}00020 \textcolor{stringliteral}{    The MIME format to use }\textcolor{keywordflow}{for} Drag \textcolor{keywordflow}{and} Drop data.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00021}00021     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00022}00022 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00023}00023 \textcolor{stringliteral}{    }\textcolor{keyword}{class }\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types}{LabelTypes}}(enum.IntEnum):}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00024}00024         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00025}00025 \textcolor{stringliteral}{        Enum of possible labels.}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00026}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types}{00026}} \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00027}00027 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00028}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types_a183ebc919a8f2ae87aa6689d8b7b5196}{00028}} \textcolor{stringliteral}{        POINT\_CHARGE = enum.auto()}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00029}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types_af584f26c0243cae6f00da2e65e54ad4c}{00029}} \textcolor{stringliteral}{        INFINITE\_LINE\_CHARGE = enum.auto()}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00030}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types_ad1cda26506d2fc66a8d77df8f26b45bb}{00030}} \textcolor{stringliteral}{        CIRCLE\_CHARGE = enum.auto()}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00031}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types_ad67eb935aca7d926a3b344bab55afd4f}{00031}} \textcolor{stringliteral}{        RING\_CHARGE = enum.auto()}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00032}00032 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00033}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types_af56266c9d54c6cecc9577ecf0e9ffe0a}{00033}} \textcolor{stringliteral}{        INVALID = enum.auto()}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00034}00034 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00035}00035 \textcolor{stringliteral}{    }\textcolor{keyword}{def }\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a2a797b019813a3e3b227e62dc177a20a}{\_\_init\_\_}}(self, parent: Optional[QtWidgets.QWidget]) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00036}00036         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00037}00037 \textcolor{stringliteral}{        Initialize }\textcolor{keyword}{class }variables.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00039}00039         Args:}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00040}00040             parent (Optional[QWidget]): The parent widget that this widget \textcolor{keywordflow}{is} a child widget of.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00041}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a2a797b019813a3e3b227e62dc177a20a}{00041}}         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00042}00042 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00043}00043 \textcolor{stringliteral}{        super().\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a2a797b019813a3e3b227e62dc177a20a}{\_\_init\_\_}}(parent)}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00044}00044 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00045}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a2b796dc92a2f261df34e3a32afd27aa0}{00045}} \textcolor{stringliteral}{        self.\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a2b796dc92a2f261df34e3a32afd27aa0}{drag\_start\_pos}} = QtCore.QPoint()}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00046}00046 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00047}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a3d4fbc65248f16869d2a91ac7f0d78af}{00047}} \textcolor{stringliteral}{        self.\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a3d4fbc65248f16869d2a91ac7f0d78af}{label\_type}} = \mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_1_1_label_types}{DraggableLabel.LabelTypes}}(DraggableLabel.LabelTypes.INVALID)}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00048}00048 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00049}00049 \textcolor{stringliteral}{    }\textcolor{keyword}{def }\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_abd35e8b8bf6e03656e6ac1276216a26f}{mousePressEvent}}(self, ev: QtGui.QMouseEvent) -\/> \textcolor{keywordtype}{None}:  \textcolor{comment}{\# pylint: disable=invalid-\/name}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00050}00050         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00051}00051 \textcolor{stringliteral}{        When the left mouse button }\textcolor{keywordflow}{is} pressed, mark the beginning of the drag.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00053}00053         Args:}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00054}00054             ev (QMouseEvent): The QMouseEvent indicating a mouse press.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00055}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_abd35e8b8bf6e03656e6ac1276216a26f}{00055}}         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00056}00056 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00057}00057 \textcolor{stringliteral}{        }\textcolor{keywordflow}{if} ev.button() == QtCore.Qt.MouseButton.LeftButton:}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00058}00058             self.\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a2b796dc92a2f261df34e3a32afd27aa0}{drag\_start\_pos}} = ev.pos()}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00060}00060     \textcolor{keyword}{def }\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_ae8bd3a08ccecebc16e90db1e1bfe04a2}{mouseMoveEvent}}(self, ev: QtGui.QMouseEvent) -\/> \textcolor{keywordtype}{None}:  \textcolor{comment}{\# pylint: disable=invalid-\/name}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00061}00061         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00062}00062 \textcolor{stringliteral}{        When the mouse }\textcolor{keywordflow}{is} moved, update its position.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00064}00064         Args:}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00065}00065             ev (QMouseEvent): The QMouseEvent indicating a mouse movement.}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00066}\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_ae8bd3a08ccecebc16e90db1e1bfe04a2}{00066}}         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00067}00067 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00068}00068 \textcolor{stringliteral}{        }\textcolor{keywordflow}{if} \textcolor{keywordflow}{not} ev.buttons() \& QtCore.Qt.MouseButton.LeftButton:}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00069}00069             \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00071}00071         \textcolor{keywordflow}{if} ((ev.pos() -\/ self.\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a2b796dc92a2f261df34e3a32afd27aa0}{drag\_start\_pos}}).manhattanLength() <}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00072}00072                 QtWidgets.QApplication.startDragDistance()):}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00073}00073             \textcolor{comment}{\# Haven't moved far enough yet to initiate a drag}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00074}00074             \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00076}00076         data = QtCore.QByteArray()}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00078}00078         val = self.\mbox{\hyperlink{classview_1_1draggable__label_1_1_draggable_label_a3d4fbc65248f16869d2a91ac7f0d78af}{label\_type}}.value}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00079}00079         data.append(val.to\_bytes((val.bit\_length() + 7) // 8, \textcolor{stringliteral}{"{}little"{}}))}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00081}00081         mime\_data = QtCore.QMimeData()}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00082}00082         mime\_data.setData(DraggableLabel.MIME\_FORMAT, data)}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00084}00084         drag = QtGui.QDrag(self)}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00085}00085         drag.setMimeData(mime\_data)}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00086}00086         drag.setPixmap(self.pixmap())}
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{draggable__label_8py_source_l00088}00088         drag.exec()}

\end{DoxyCode}
